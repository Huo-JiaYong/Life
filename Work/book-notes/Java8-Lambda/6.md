## 数据并行化

1. 并发和并行

   并发是两个任务共享时间段，并行是两个任务在同一时间发生

   并行将**工作拆分**能加快效率，如算所有数字的和，将其分成很多个快分别计算后在计算

2. 并行化流操作

   调用 parallelStream() 方法即可并行

   1. 初值必须为组合函数的**恒等值**（初始化值要相同）
   2. 组合操作必须符合**结合律**，如：(4+2) + 1 = 4 + (2+1) = 7 ：任意的元素组合不会影响结果
   3. 要避免持有锁

3. 影响性能的主要因素

   1. 数据大小
   2. 数据结构
   3. 装箱
   4. CPU核心数量
   5. 单元处理开销

4. 常用的集合类

   1. 性能好：ArrayList、数组、IntStream.range()
   2. 性能一般：HashSet、TreeSet （不容易公平分解）
   3. 性能差：LinkedList、Streams.iterate、Buffered.lines （长度位置，很难分解）

5. 并行化数组操作

   1. parallelPrefix [ 计算和 ]
   2. parallelSetAll [ 更新数组元素 ] 
   3. parallelSort [ 排序 ]