## 3 yue 

#### 3-4

1. 修改所有入职第一课都完成才认证（多个课程完成学员求并集）
2. 直接修改计件数据，不使用任务的（避免同步时间比任务执行时间晚则会丢失一天的数据）

#### 3-5

1. 优化所有课程完成的筛选（初始化后就不能赋值）
2. 和产品确认要不要实时查询课程进度：不要
3. 补充技术实现文档功能点
4. 提测流程：merge into test -> CICD -> portainer log
5. 排查新增学习分组太慢的问题：同步太多茶生的人员信息
6. 引发出需要修改：员工和 umu 绑定的**筛选**功能（刘科开发）
7. **错误提交：**未提交查询 2 个月的、判空忘了返回！（**提交之前一定要先运行测试一下**）
8. 打包引用错误：
   1. 认为没有打包（实际上：没有打包之前的都不能运行） 
   2. 没有引用，怀疑是 CI 的问题（实际上：被新打包的覆盖了）

#### 3 - 6 

1. 

#### 3 - 7

1. 项目有一些不是特别完善，要自己有判别能力
2. 筛选所有的相关接口，是否需要判定入职第一课的认证
3. 需要修改同步时没有计件方式就新增么 ？从程序的健壮性来说是可以的
4. 修改公司为计件后会同步用户为计件方式（陈开）

#### 3 - 8 

1. 测试多个新增计件数据的接口，有技能和没技能时的计件方式是否正确
2. 多个分支的 CD 会发生冲突么？ 如果配置的 **deploy 的环境相同**就会（现在就是只有一个 dev 环境）
3. 修改判定的逻辑，服务运行未运行就进入 false 的逻辑（应该优先 ture 的判定条件）

#### /

#### 3 - 11

1. 检查查询第一课认证状态的 true 的逻辑是否正确

2. 捣鼓一下 ssh 工具，还是要 MobaXterm 就行把

3. 提测：就是相当于交付，**要保证测试环境的版本正确**（和其他版本冲突，多沟通！要主动落地）

4. 排查测试第一次新增用户出现的计件模式错误问题：用户和计件数据不匹配就会初始化

   改：计件方式根据用户的认证状态来

5. 用户未获得技能认证就开始计件了（同上）

   因：同上

6. 新增 app 的计件数量错误：列表中排除了停用用户，计数没有

   改：在新增计件数据时，停用用户不新增（启用时会新增）

#### 3 - 12

1. 初始化门店的计件人员信息时，新增店长判定（想好逻辑，拣一块丢一块）
2. 从非计件门店到计件门店的员工是计件状态，是对的
3. 只有有计件信息时，调店等才会保留员工的计件信息
4. 同步接口到 APIFOX，学习下标准文档注释

#### 3 - 13

1. 发布计划文档
2. 全局参数、接口用例、标准注释（java里的注释就行了）
3. 看一下导出后的文档，结果把软件删啦

#### 3 - 14

1. 修改技能认证的匹配方式：入职第一课 + 所属职位（名字可能会变动，更好定位）
2. 测试上线

#### 3 - 15

1. 看一下其他开源项目怎么集成 RocketMQ 的
2. GMV 目标的需求整理，技术文档编写

#### /

#### 3 - 18

1. 补充文档的缺失接口信息 和 SQL
2. 自己整理了一套技术方案实现的文档格式（还是用组长给的好）
3. 周四就要提测 ！？
4. 重新沟通需求和确定提测的功能

#### 3 - 19

1. 修改展示目标杯量的接口
2. 小程序是否展示的数据修改
3. 小程序开发工具用不了？（**有报错先搜一下，然后再问，不要养成路径依赖**）
4. 测试修改的接口在 API 中是否正常

#### 3 - 20

1. 试一下测试版本正常
2. 杯量计件的门店同步不正确（有多个模板记录）
3. **初始化同步数据不正确（没有去除茶生关键字！这些魔法值如何统一？）**
4. 如何修复线上数据
   1. 查询所有已有技能认证 & 非计件的人员 => 改为计件模式
   2. 将他们更新成计件标记（从认证开始算？要记录其获得认证的时间和数据？）
   3. 客户问起来如何回复 ？
5. 修改 feign 的调用方式

#### 3 - 21

1. 修改门店计件类型，但是插入数据的问题（重写了 insertBatch 方法，**要仔细检查实现啊**）

2. 下午请假

3. **错误计件方式的处理：**

   1. 有认证 & 非计件的员工：需要改为计件（排除手动修改为非计件的）

      重算工资期间：直接从 03.14 开始

   2. 已经手动修改为是的员工：不改

      重算工资期间：认证时间 -> 修改时间

4. 发包后要多关注自己开发的功能，不要等着

#### 3 - 22

1. 导入 excel 的基本实现方式

#### /

#### 3 - 25

1. 新增的功能接口要写完
2. 有得功能尽量复制（但是找得成本也挺高得，而且人容易乱），直接大规模得复制 ？
3. 接口调通了

#### 3 - 26

1. 查询接口：筛选门店错了
2. 更新接口：没有更新人和时间
3. 导入接口：查询的门店错误、模板文件错误
4. **不要新建分支**
5. 修改其他接口的数据来源

#### 3 - 27

1. 重新导入的 SQL 有问题（通过 store_id 可能会出现 store_no 被遗漏的问题）
2. 修改一下大小的校验，EXCEL 的多行提示兼容（组件BUG 跳过2行读取数据为NULL）
3. 校验各个用到 store_target 的地方，确认不修改
4. 上传更新 GMV 的数据源，**没有引用 API 的方式 ！！！太傻了**
5. 查询门店通过 code 
6. 列表的门店权限新增
7. 查询门店的结果是 null **feign !!!**

#### 3 - 28

1. ~~导入过程中的权限控制 ？~~ 暂时不管
2. 页面 GMV 的数据展示 ？（历史数据错误的）
3. 修改时的服务器数据校验 ？
4. **门店名称多个？**（实际上 is_deleted 只会有一个）
5. ~~同步数据以 store_id 进行分组（store_no不一样导致数据丢失）~~OR 以 store_code 分组（去掉id=0的数据就没有重复了）
6. 查询没有数据，但是接收到 R.data != null 并且属性都是 null（先手动处理一下）
7. **没有同步新增 GMV 的接口！！！**
8. **BigDecimal 序列化后是 -1**
9. 不是为空的数据调用错误了，**而是返回的 data 中没有数据**，转换成 null 错拉~（仔细分析报错原因）
10. 所有的数据都返回 data ，消息放到 msg 就行了
11. 统一 store_code 进行查询 GMV，**实际上在改的时候就应该发现，自测是个问题**
12. **新增校验没有生效！！！因为居然没有写 retrun !**

#### 3 - 29

1. 用 apifox 进行接口的测试
2. 更新全局变量的 token
3. 自动检查更新全局变量 access_token（要所有都加上前置方法，并且还有过期时间）

#### /

#### 4 - 1

1. 还是不用 ACCESS_TOKEN 了，主要是 token 接口更新过期时间（算啦）
2. 新增门店基本工资的信息查询（**通过接口可以查到别人的信息？系统本来就酱紫的**）
3. 更新测试环境失败：从报错上看加载了阿里云的 nacos ，所以可以确定是配置问题

#### 4 -2 

1. 校验身份证又出错啦！**按照需求的业务范围修改**（**不是这个范围尽量别改！！！**）
2. 请求的方法忘了加 / 号 **规范性啊，提交的时候以 code review 的心态去逐行走读！！！**

#### 4 - 3 

1. 重新检查线上功能的正确性
2. 查看 4 月的需求文档

#### / 

#### 4 - 7 

1. 某用户未自动获得认证：用户绑定的 umu_id 是 0 导致。（**加强健壮性**，这个匹配不到尝试用其他参数）
2. **不止是错误的数据要日志**，**同步的数据**也尽量打日志。不然只能通过数据分析了
3. 整理学堂的相关需求

#### 4 - 8 

1. 各个功能的需求方案和实现逻辑盘点
2. 申请后分组，学习，自动晋升 -> 自动分组，学习，申请晋升
   - [ ] 删除晋升的同步任务
     - [ ] 那和晋升相关的技能认证都在他~~申请~~**晋升完成时**才能加上？
   - [ ] 去掉所有晋升分组（直接将晋升分组的技能配置到长期里） ~~保留晋升分组，自动进入分组~~
     - [ ] 自动进入分组，每天需要扫描所有人加到对应的晋升分组中 ？
       - [ ] 只需要初始化一下 ，以后都晋升时添加 
       - [ ] 如果新加的认证就要下一级的所有加？
       - [ ] 新加的人也要自动同步 涉及太多了
     - [ ] 怎么确定是否要加入分组 ？下一职级 + 分组中没有？
     - [ ] 加入到晋升分组后什么时候删除。晋升成功的时候才移除，再添加到下级分组中？

#### 4 - 9

1. 要不要先写技术实现文档（现有的文档看起来其实并不是很方便）
2. 讨论需求拆分的问题
3. 阅读之前的审批流程方式：一级一级的创建
4. LocalDateTime 序列化错误了，因为指定了全局的序列化问题

#### 4 - 10

1. 序列化时间错误的问题：反序列化用的时间戳
2. 新的审批流程的实现方案考虑
3. 下午评审测试用例

#### 4 - 11

1. 直接生成所有审批人的记录

#### 4 - 12

- [x] 公司配置 HR 的功能

#### /

#### 4 - 15

- [x] 新的审批流程
  - [x] 流程流转
  - [ ] 下级人员校验 ？
  - [x] 完成获得认证
- [x] 审批的页面接口改动

#### 4 - 16

1. 晋升时，需要将之前的缺失的技能补上（更新和）
2. 新增 OR 更新用户现有的技能

#### 4 - 17

1. 完成晋升申请的流程接口

#### 4 - 18

1. **排查 umu 在查询课程进度时，部分用户数据不完整的问题**

#### 4 - 19

1. 自测晋升全流程的接口

#### /

#### 4 - 22

1. 查看工资单的相关需求，初步计划涉及的表和字段同步
2. 查看设计图，配合规划设计表功能
3. 用户离职后，相关的晋升申请的处理

#### 4 - 23

1. 拉取分支，整理基础的相关代码
2. 完成工资单用户相关的功能接口开发

#### 4 - 24

1. 模拟数据，自测工资单相关接口的数据

#### 4 - 25

1. 和前端对接相关的接口
2. 新增全部门店的职位展示，计件数据展示不完整的问题

#### 4 - 26

1. 新增预览审批人的接口
2. 新增审批人为自己的时候自动审批通过

#### 4 - 28

1. 自测自动通过的流程是否正确。自己申请和流程中通过
2. 新增评分展示、撤销权限
3. 修改规范申请参数

#### 4 - 29

1. 自测门店 GMV 导入错误的问题，测试环境直接请求接口错误（应该是环境不对）

#### 4 - 30 [请假]

1. 前端要联调，但是我关机了。请假应该保持远程开启，放假都算了

#### /

#### 5 - 6

1. 排查优化入职第一课的整个同步流程中所有报错的地方，都加上处理
2. 调用微服务错误抛错，任务失败

#### 5 - 7

1. 更新到 test_cloud 环境提测
2. 发现部分没提交的功能：校验学习进度
3. 同步新功能的代办通知，了解通知后的处理逻辑，修改人员的获取
4. 修复门店获取教练错误的问题
5. 修复获取学习项目没有保存 URL 的问题，应该让刘科修改，至少也应该让他知道~

#### 5 - 8 

1. 重新整理第一课的相关逻辑和优化
2. 更新到 test_cloud 环境自测相关修改是否正确
3. 修复门店的计件方式不正确

#### 5 - 9

1. 修复 HR 的数据错误
2. 修复评分模式：加盟商 + 教练 = 评分
3. 修复审核的评分模式

#### 5 - 10

1. 排查一下三个用户不在这个门店，但是其 umu 系统在（应该是是人为操作）
2. 新增一个注解日志记录，参考：框架自带的注解 @BussinessLog 实现方式
3. 自测一下可以生成日志信息

#### 5 - 11

1. 自测通过不同途径请求的日志信息是否准确
2. 新增记录异常信息
3. 自测微服务调用的异常信息和业务异常等

#### /

#### 5 - 13

1. 不喜欢用 apifox 的 token 问题解决：

   1. 每个项目都新增TOKEN接口
   2. access_token 设置到环境变量中
   3. 自己建一个环境（区分人员）全局变量引用环境变量
   4. 不同账号不同用例

2. 不喜欢用 apifox 的接口问题：项目的接口管理混乱，可能接口未更新到

   大部分接口还是有的，**没有的话，需要也可以主动更新上去**

3. 有问题就要去解决、去了解，尽量别搞自己的标准

4. 改一下 AOP 日志可能抛错的问题

#### 5 - 14

1. 和产品沟通，这个日志测试看一下就行
2. 和刘科确定哪些需要再加这些日志，主要是 feign 的请求
3. 整理所有可能用到的 client 的地方，影响的接口 [产出文档](https://cx5n8kbm14.feishu.cn/wiki/MkEiw5si7inn4wkNySacqCmwnYd)
4. 更新到 test_cloud 环境，点几个接口正常记录

#### 5 - 15

1. 